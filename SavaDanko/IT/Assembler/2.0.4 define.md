### ==Директива `%define` в `nasm`==
Директива `%define` в `nasm` позволяет вам определять символы (идентификаторы) или текстовые замены, которые затем будут подставляться вместо именованного символа в вашем коде.

### ==Синтаксис==
```asm
%define имя_символа значение
```
Значение может быть числом, текстом или даже более сложной инструкцией. Директива заменяет все появления этого символа в исходном коде на указанное значение при этапе препроцессинга.

### ==Примеры использования==
1. **Константы:**
   В ассемблере часто используется для объявления числовых констант, которые могут быть полезны при работе с системными вызовами, адресами, размерами буферов и т. д.
   ```asm
   %define SYS_EXIT 60
   %define STDOUT 1
   %define HELLO_MSG "Hello, World!", 0
   ```
   В этом случае при использовании `SYS_EXIT`, `STDOUT` или `HELLO_MSG` препроцессор будет подставлять соответствующие значения.

   Пример использования этих констант:
   ```asm
   section .data
       message db HELLO_MSG

   section .text
       global _start

   _start:
       ; Печать строки
       mov rax, 1          ; Системный вызов на write
       mov rdi, STDOUT     ; В stdout
       mov rsi, message    ; Адрес сообщения
       mov rdx, 13         ; Длина сообщения
       syscall

       ; Завершение программы
       mov rax, SYS_EXIT   ; Системный вызов на exit
       xor rdi, rdi        ; Код возврата 0
       syscall
   ```

2. **Макросы для упрощения кода:**
   Можно использовать `%define` для создания макросов, чтобы сделать код более читаемым или сократить повторяющийся код.
   ```asm
   %define exit_program mov rax, 60 \n xor rdi, rdi \n syscall

   section .text
       global _start

   _start:
       ; Ваш код

       exit_program
   ```
   Здесь директива `exit_program` заменит несколько строк кода, отвечающих за завершение программы.

3. **Замена текста:**
   Можно использовать для создания замены текста. Например, если вы хотите изменить имя регистра или команды для удобства, например:
   ```asm
   %define PRINT_SYSCALL mov rax, 1
   ```

   Это приведет к тому, что в коде при использовании `PRINT_SYSCALL` вместо него будет вставлена инструкция `mov rax, 1`.

### ==Отличие от макросов==
Макросы могут быть более сложными конструкциями, которые позволяют вам определять блоки кода с параметрами, что упрощает использование повторяющихся фрагментов. Например:
```asm
%macro print 2
    mov rax, 1          ; Системный вызов на write
    mov rdi, 1          ; В stdout
    mov rsi, %1         ; Адрес строки
    mov rdx, %2         ; Длина строки
    syscall
%endmacro
```

Теперь можно использовать этот макрос для печати строк, передавая адрес и длину строки как параметры:
```asm
section .data
    message db "Hello!", 0

section .text
    global _start

_start:
    print message, 6
```

