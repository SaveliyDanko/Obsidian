В Linux системные вызовы (`syscalls`) используются для взаимодействия программы с ядром операционной системы. Они позволяют выполнять различные операции, такие как ввод-вывод, управление процессами и памятью. В программировании на `NASM` системные вызовы выполняются через прерывание с использованием инструкции `int 0x80` для 32-битных программ или с помощью системного вызова `syscall` для 64-битных программ.

Каждый системный вызов имеет уникальный **номер**, который загружается в регистр `eax` для 32-битных программ (или в `rax` для 64-битных программ). Другие регистры используются для передачи аргументов.

### ==Основные системные вызовы в Linux (32-битная система)==
Для выполнения системного вызова необходимо:
1. Загрузить номер системного вызова в регистр `eax`.
2. Загрузить аргументы в соответствующие регистры:
   - `ebx`, `ecx`, `edx`, `esi`, `edi`, `ebp` — используются для передачи аргументов.
3. Выполнить прерывание `int 0x80` для 32-битных систем.

### ==Пример системных вызовов==
#### 1. **`sys_exit` (номер системного вызова: 1)**
Используется для завершения программы. Аргументом является код завершения программы, передаваемый в регистр `ebx`.
- Номер системного вызова: 1
- Регистр для аргумента: `ebx` (код завершения)

Пример:
```asm
mov eax, 1          ; номер системного вызова sys_exit
xor ebx, ebx        ; код завершения 0
int 0x80            ; выполнить системный вызов
```

#### 2. **`sys_write` (номер системного вызова: 4)**
Используется для записи данных в файл или на стандартный вывод (stdout). Требуются три аргумента:
- Дескриптор файла (1 для stdout).
- Адрес данных для записи.
- Количество байт для записи.

- Номер системного вызова: 4
- Аргументы:
  - `ebx`: файловый дескриптор (1 — stdout)
  - `ecx`: указатель на строку
  - `edx`: длина строки

Пример:
```asm
section .data
    msg db 'Hello, world!', 0xA  ; строка с символом новой строки

section .text
global _start

_start:
    ; Системный вызов sys_write
    mov eax, 4          ; номер системного вызова для sys_write
    mov ebx, 1          ; файловый дескриптор (1 - stdout)
    mov ecx, msg        ; указатель на строку
    mov edx, 13         ; длина строки (13 байт)
    int 0x80            ; выполнить системный вызов

    ; Системный вызов sys_exit
    mov eax, 1          ; номер системного вызова для sys_exit
    xor ebx, ebx        ; код завершения 0
    int 0x80            ; выполнить системный вызов
```

#### 3. **`sys_read` (номер системного вызова: 3)**
Используется для чтения данных из файла или с ввода (stdin). Требуются три аргумента:
- Дескриптор файла (0 для stdin).
- Указатель на буфер, куда будут записаны данные.
- Количество байт для чтения.

- Номер системного вызова: 3
- Аргументы:
  - `ebx`: файловый дескриптор (0 — stdin)
  - `ecx`: указатель на буфер
  - `edx`: количество байт для чтения

Пример:
```asm
section .bss
    buffer resb 128    ; буфер для чтения данных (128 байт)

section .text
global _start

_start:
    ; Системный вызов sys_read
    mov eax, 3          ; номер системного вызова sys_read
    mov ebx, 0          ; файловый дескриптор (0 - stdin)
    mov ecx, buffer     ; указатель на буфер
    mov edx, 128        ; количество байт для чтения
    int 0x80            ; выполнить системный вызов

    ; Системный вызов sys_exit
    mov eax, 1          ; номер системного вызова для sys_exit
    xor ebx, ebx        ; код завершения 0
    int 0x80            ; выполнить системный вызов
```

### ==Некоторые популярные системные вызовы и их номера==

| Номер | Название         | Описание                   |
| ----- | ---------------- | -------------------------- |
| 1     | `sys_exit`       | Завершить процесс          |
| 3     | `sys_read`       | Прочитать данные           |
| 4     | `sys_write`      | Записать данные            |
| 5     | `sys_open`       | Открыть файл               |
| 6     | `sys_close`      | Закрыть файл               |
| 9     | `sys_mmap`       | Маппинг файлов в память    |
| 45    | `sys_brk`        | Управление памятью         |
| 60    | `sys_exit_group` | Завершить процесс (x86-64) |

### ==Системные вызовы в 64-битной системе==
В 64-битных системах системные вызовы немного отличаются. Вместо прерывания `int 0x80` используется инструкция `syscall`. Аргументы передаются через регистры:
- `rax` — номер системного вызова.
- `rdi`, `rsi`, `rdx`, `r10`, `r8`, `r9` — используются для передачи аргументов.

Пример для 64-битной системы:
```asm
section .data
    msg db 'Hello, world!', 0xA

section .text
global _start

_start:
    ; Системный вызов sys_write
    mov rax, 1          ; номер системного вызова sys_write
    mov rdi, 1          ; файловый дескриптор (1 - stdout)
    mov rsi, msg        ; указатель на строку
    mov rdx, 13         ; длина строки
    syscall             ; вызвать системный вызов

    ; Системный вызов sys_exit
    mov rax, 60         ; номер системного вызова sys_exit
    xor rdi, rdi        ; код завершения 0
    syscall             ; вызвать системный вызов
```

### ==Заключение==
Номера системных вызовов в Linux необходимы для прямого взаимодействия программы с ядром через ассемблер. Каждый вызов требует указания своего номера в регистре `eax` (или `rax` для 64-битных систем) и передачи аргументов через другие регистры.