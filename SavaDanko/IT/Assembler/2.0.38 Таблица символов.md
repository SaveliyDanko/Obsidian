**Таблица символов** — это структура данных, которая создаётся на этапе компиляции программы на ассемблере и содержит информацию о **символах** программы, таких как метки, переменные и функции. Таблица символов является частью объектных файлов (например, файлов формата ELF на Linux) и используется компоновщиком для связывания разных частей программы.

### ==Основные понятия:==
1. **Символы**:
   Символы в ассемблере — это метки, переменные, функции, глобальные переменные и другие именованные элементы, которые используются в программе. Каждый символ имеет своё имя, тип и, при необходимости, адрес в памяти.

2. **Таблица символов**:
   Таблица символов содержит информацию обо всех символах, которые определены или используются в программе. Это позволяет компилятору и компоновщику знать, где в памяти или в объектном файле находятся функции и переменные, а также как связать разные объектные файлы вместе.

### ==Типы символов:==
1. **Глобальные символы**:
   Это символы, которые доступны в других модулях программы. Они могут быть экспортированы с помощью директивы `global` (например, `global _start`), чтобы их могли использовать другие файлы.

2. **Локальные символы**:
   Это символы, которые используются только внутри одного файла и не видны другим модулям программы. Такие символы могут быть внутренними переменными или метками в пределах одной программы.

3. **Внешние символы**:
   Это символы, которые используются в программе, но определены в других модулях. Такие символы объявляются с помощью директивы `extern` (например, `extern printf`), и компоновщик позже связывает их с реальной функцией или переменной из другого объекта или библиотеки.

### ==Для чего используется таблица символов?==
1. **Разрешение ссылок между модулями**:
   Когда программа разбита на несколько файлов, один файл может содержать вызов функции или ссылку на переменную, которые определены в другом файле. Компоновщик использует таблицу символов, чтобы связать такие обращения. Например, если один файл ссылается на функцию `f1`, определённую в другом модуле, компоновщик найдет её адрес в таблице символов и корректно свяжет ссылки.

2. **Отладка**:
   Таблица символов также используется в отладочных инструментах для отображения имен переменных, функций и меток во время отладки программы. Это позволяет отладчику сопоставить адреса в памяти с именами символов из исходного кода.

3. **Компоновка**:
   Компоновщик использует таблицу символов для связывания объектных файлов. Когда объектные файлы ссылаются на символы, определённые в других модулях, компоновщик разрешает эти ссылки с помощью таблицы символов.

### ==Структура таблицы символов:==
Каждая запись в таблице символов обычно включает следующие поля:
- **Имя символа**: Название переменной, функции или метки.
- **Адрес символа**: Место, где хранится символ в памяти или в коде программы.
- **Тип символа**: Указывает, что это — функция, переменная, метка или что-то ещё.
- **Размер символа**: Определяет размер символа (например, для массивов или структур).
- **Секция символа**: Указывает, в какой секции программы находится символ (например, в секции `.text` для кода или `.data` для данных).
- **Видимость символа**: Определяет, является ли символ локальным или глобальным.

### ==Пример программы и таблицы символов:==
Пример программы на ассемблере:
```asm
section .data
message db 'Hello, world!', 0

section .text
global _start

_start:
    mov rsi, message
```

#### Объяснение:
- **`message`** — это метка, указывающая на строку `"Hello, world!"`. Она находится в секции `.data`.
- **`_start`** — это глобальная метка, указывающая на точку входа программы. Она находится в секции `.text`.

#### Пример вывода таблицы символов:
Если использовать утилиту `nm`, чтобы просмотреть таблицу символов для скомпилированного объектного файла, можно увидеть что-то вроде этого:
```bash
nm program.o
```

Вывод:
```
00000000 T _start
00000000 d message
```
- **`T _start`** — это символ, который находится в секции `.text` и представляет точку входа программы.
- **`d message`** — это символ, который находится в секции `.data` и представляет строку `"Hello, world!"`.

### ==Символы и их использование в таблице:==
- **Глобальные символы** (обозначены как `T` в секции `.text` или `D` в секции `.data`) могут использоваться компоновщиком для связывания различных объектных файлов.
- **Локальные символы** не экспортируются и не видны другим объектным файлам.
- **Внешние символы** (обозначаются буквой `U` для "undefined") — это символы, которые нужно разрешить в других модулях.

### ==Таблица символов и ELF-файлы:==
В форматах объектных файлов, таких как **ELF** (используемый в Linux), таблица символов является неотъемлемой частью структуры файла. ELF-файлы содержат несколько секций, и таблица символов является одной из них. Компоновщик использует эту таблицу для правильного связывания модулей программы и разрешения ссылок.
