Директивы `%if`, `%elif`, `%else`, `%endif` в ассемблере (в частности, в NASM) — это элементы условной компиляции. Они позволяют выполнять или пропускать определённые участки кода в зависимости от условий, которые задаются на этапе препроцессинга. Эти директивы помогают контролировать, какие части кода будут включены в финальный ассемблерный файл.

### ==Основные директивы:==
1. **`%if`** — проверяет условие. Если условие истинно (т.е. выражение вычисляется в ненулевое значение), то код внутри этой директивы включается в итоговую программу.
2. **`%elif`** — аналог `else if` в других языках. Проверяет условие, если предыдущие условия не были истинными.
3. **`%else`** — блок, который выполняется, если все предыдущие условия были ложными.
4. **`%endif`** — завершает блок условной компиляции.

### ==Синтаксис:==
```asm
%if условие
    ; код, который включится в программу, если условие истинно
%elif другое_условие
    ; код, который включится, если первое условие ложно, но второе истинно
%else
    ; код, который включится, если все предыдущие условия ложны
%endif
```

### ==Пример использования:==
```asm
%define DEBUG 1

%if DEBUG == 1
    ; Этот код будет включен в программу, если DEBUG == 1
    mov rax, 0x1234
%else
    ; Этот код будет включен, если DEBUG не равен 1
    mov rax, 0x5678
%endif
```

Здесь:
- Если макрос `DEBUG` равен `1`, то при компиляции в программу включится команда `mov rax, 0x1234`.
- Если `DEBUG` не равен `1`, будет включена команда `mov rax, 0x5678`.

### ==Работа с арифметическими выражениями:==
Директивы `%if` и `%elif` могут использовать не только простые сравнения, но и сложные арифметические выражения.

#### Пример с арифметическим выражением:
```asm
%define A 10
%define B 20

%if A + B > 25
    mov rax, 1
%elif A + B == 30
    mov rax, 2
%else
    mov rax, 3
%endif
```
Здесь:
- Если сумма `A + B` больше 25, то будет включён первый блок кода (`mov rax, 1`).
- Если сумма `A + B` равна 30, включится второй блок (`mov rax, 2`).
- Если ни одно из условий не выполнено, включится блок `else` (`mov rax, 3`).

### ==Пример использования для управления конфигурацией программы:==
Условная компиляция часто используется для включения или отключения частей программы в зависимости от того, что нужно компилировать (например, отладочные версии программы или релизные).

#### Пример:
```asm
%define DEBUG 0   ; 1 - режим отладки, 0 - режим релиза

%if DEBUG == 1
    ; Включаем отладочную информацию
    mov rax, 'DEBUG'
%else
    ; Включаем минимальный код для релизной версии
    mov rax, 'RELEASE'
%endif
```

### ==Поддерживаемые операторы и выражения:==
Директивы `%if`, `%elif` поддерживают стандартные операторы:
- Арифметические: `+`, `-`, `*`, `/`
- Логические: `&&`, `||`
- Операции сравнения: `==`, `!=`, `<`, `>`, `<=`, `>=`

Выражения, используемые в `%if` и `%elif`, должны быть **константными** (т.е. все переменные или макросы, которые используются в этих выражениях, должны быть определены на этапе препроцессинга).

### ==Пример с несколькими условиями:==
```asm
%define A 5
%define B 10

%if A > B
    mov rax, A
%elif A == B
    mov rax, 0
%else
    mov rax, B
%endif
```
Здесь:
- Если `A` больше `B`, то в `rax` запишется значение `A`.
- Если `A` равно `B`, то в `rax` запишется `0`.
- Если ни одно из предыдущих условий не выполнено, в `rax` запишется значение `B`.

### ==Пример с `%ifidn` и `%ifdif`:==
Дополнительно существуют другие директивы для условной компиляции, например:
- **`%ifidn`** — проверяет, идентичны ли две строки или макросы.
- **`%ifdif`** — проверяет, различны ли строки или макросы.

#### Пример с `%ifidn`:
```asm
%define MODE "DEBUG"

%ifidn MODE, "DEBUG"
    mov rax, 'Debug mode'
%else
    mov rax, 'Release mode'
%endif
```
