**Local Descriptor Table (LDT)** — это одна из структур управления памятью в архитектуре процессоров x86, которая используется в **защищённом режиме** для описания сегментов памяти. LDT позволяет индивидуальным процессам или задачам иметь свои собственные сегменты памяти, предоставляя более гибкую и изолированную схему работы с памятью по сравнению с **Global Descriptor Table (GDT)**, которая используется на уровне всей системы.

### ==Основные характеристики LDT:==
1. **Локальная таблица дескрипторов (LDT):**
   - В LDT содержатся дескрипторы сегментов, которые описывают сегменты памяти для конкретного процесса или задачи. Эти дескрипторы включают базовый адрес сегмента, его размер, а также права доступа (чтение, запись, выполнение).
   - LDT предоставляет каждому процессу или задаче свою собственную схему сегментации, что позволяет изолировать память между процессами и задачами.

2. **Глобальная и локальная таблицы:**
   - **Global Descriptor Table (GDT)** — это таблица дескрипторов сегментов, которая описывает сегменты, доступные для всех процессов в системе. GDT используется для описания глобальных сегментов, таких как сегменты кода ядра операционной системы или сегменты данных, общие для всех задач.
   - **Local Descriptor Table (LDT)** — создаётся для каждого процесса или задачи отдельно. Она позволяет каждому процессу иметь свои собственные сегменты, которые не зависят от других процессов, что повышает безопасность и изоляцию.

3. **Изоляция процессов:**
   - LDT позволяет операционной системе изолировать память каждого процесса. Это значит, что процессы не могут напрямую обращаться к памяти других процессов, так как у каждого процесса свои собственные дескрипторы сегментов в LDT.
   - Каждый процесс видит своё виртуальное адресное пространство, которое управляется его собственными дескрипторами сегментов в LDT. Это повышает безопасность и предотвращает доступ к чужим данным.

4. **Доступ к LDT через GDT:**
   - Чтобы процессор мог использовать LDT, в **Global Descriptor Table (GDT)** должна быть запись, которая указывает на LDT для конкретного процесса или задачи. Таким образом, GDT содержит дескриптор, ссылающийся на LDT, и процессор использует этот дескриптор для обращения к локальной таблице дескрипторов при выполнении задач этого процесса.

5. **Селекторы сегментов:**
   - Для каждого сегмента в памяти процессор использует **селектор сегмента**. Селектор сегмента указывает, использовать ли GDT или LDT для поиска дескриптора сегмента. Селекторы сегментов содержат бит, который указывает, откуда брать дескриптор: из GDT или LDT.
   - В селекторе сегмента бит **TI (Table Indicator)** указывает, следует ли использовать GDT или LDT:
     - Если TI = 0, процессор использует GDT.
     - Если TI = 1, процессор использует LDT.

### ==Структура дескриптора в LDT:==
Каждый дескриптор в LDT имеет такую же структуру, как и дескриптор в GDT, и содержит следующие поля:

1. **Базовый адрес сегмента (Base):**
   - Указывает начальный адрес сегмента в памяти.

2. **Размер сегмента (Limit):**
   - Указывает размер сегмента (в байтах или страницах), который ограничивает, сколько данных может быть адресовано в этом сегменте.

3. **Тип сегмента и права доступа (Access Byte):**
   - Указывает, является ли сегмент сегментом данных, кода или стека.
   - Также определяются права доступа: чтение, запись или выполнение.

4. **Уровень привилегий (Privilege Level):**
   - Определяет уровень привилегий, с которым может быть использован сегмент. Это важно для реализации защиты памяти и изоляции между процессами.

### ==Когда используется LDT:==
1. **Многозадачность:**
   - В системах с многозадачностью каждый процесс или задача может иметь свою собственную таблицу LDT для управления своими сегментами памяти. Это позволяет операционной системе эффективно изолировать задачи и гарантировать, что они не мешают друг другу.

2. **Изоляция пользовательских и системных процессов:**
   - LDT часто используется для разделения пользовательских приложений и системных процессов. Программы с низким уровнем привилегий могут использовать сегменты из LDT, чтобы не получать доступ к системным ресурсам, описанным в GDT, и таким образом обеспечивать изоляцию пользовательских данных от данных операционной системы.

3. **Поддержка виртуализации:**
   - В некоторых системах виртуализации и эмуляции LDT может использоваться для создания виртуальных машин или изолированных задач. Например, в виртуальном 8086 режиме (Virtual 8086 Mode) LDT может использоваться для управления сегментами памяти виртуализированных задач.

### ==Пример работы с LDT:==
1. **Инициализация LDT:**
   - При создании нового процесса операционная система может инициализировать для него LDT, в которую будут занесены дескрипторы сегментов памяти, выделенных этому процессу.
   
2. **Селекторы сегментов:**
   - Когда процесс выполняет инструкции, он использует селекторы сегментов для доступа к памяти. Если селектор указывает на LDT, процессор обращается к дескрипторам сегментов, хранящимся в LDT, чтобы получить адреса памяти и права доступа.

3. **Переключение задач:**
   - Когда операционная система переключается с одного процесса на другой, она может загрузить новую LDT для нового процесса, тем самым предоставив ему его собственные сегменты памяти и предотвращая доступ к сегментам другого процесса.

### ==Пример использования LDT:==
Предположим, что в системе выполняется несколько программ одновременно. Каждая программа имеет свою таблицу LDT, которая определяет её сегменты памяти. Программа A работает с сегментами памяти, указанными в её LDT, и не может получить доступ к сегментам программы B, поскольку у программы B своя собственная LDT. Таким образом, программы изолированы друг от друга, и операционная система может безопасно управлять несколькими задачами одновременно.

### ==Заключение:==
**Local Descriptor Table (LDT)** — это важный механизм управления памятью в защищённом режиме процессоров x86, который позволяет каждому процессу иметь свои собственные сегменты памяти. LDT обеспечивает гибкость в работе с памятью, изоляцию процессов и безопасность. В современных системах LDT используется для поддержки многозадачности, разделения прав доступа и защиты памяти. В то время как GDT описывает глобальные сегменты, такие как ядро операционной системы, LDT предоставляет возможность каждому процессу или задаче иметь свою индивидуальную схему сегментации.