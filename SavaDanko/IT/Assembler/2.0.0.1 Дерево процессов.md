### ==Дерево процессов в Linux==
**Дерево процессов** в Linux — это иерархическая структура, в которой каждый процесс имеет родительский и дочерние процессы. Оно отражает, как процессы создаются, управляются и завершены в системе.

#### ==Основные понятия:==
1. **Процесс** — это программа, выполняющаяся в системе. Каждый процесс имеет уникальный идентификатор (PID).
2. **Родительский процесс** — это процесс, который создал другой процесс. В операционной системе процессы порождаются с помощью системного вызова `fork()`, а затем новый процесс может заменить свою программу с помощью вызова `exec()`.
3. **Дочерний процесс** — это процесс, созданный другим процессом.
4. **Процесс-зомби** — процесс, который завершил своё выполнение, но его родитель ещё не обработал его статус завершения.
5. **Процесс-сирота** — это процесс, у которого родительский процесс завершился, и тогда его новым родителем становится процесс `init` (или `systemd` в современных системах).

#### ==Как это работает:==
- Каждый процесс в системе имеет **родительский процесс**, который его породил. Процесс может порождать **дочерние процессы** через системный вызов `fork()`. Родительский процесс продолжает выполнение, и параллельно запускается дочерний.
- Все процессы отслеживаются в виде дерева, в корне которого находится процесс с PID 1 — это процесс `init` (или `systemd`), который запускается первым при загрузке системы. Весь цикл жизни процессов в Linux начинается с этого процесса.

#### ==Пример структуры дерева процессов:==
```
systemd (PID 1)
 ├── bash (PID 2345)
 │   ├── vim (PID 2346)
 │   └── gcc (PID 2347)
 └── sshd (PID 5678)
     └── bash (PID 5679)
         └── top (PID 5680)
```
В этом примере `systemd` порождает несколько процессов, таких как `bash` и `sshd`. Процесс `bash` может порождать свои дочерние процессы, например, `vim` или `gcc`.

#### ==Инструменты для просмотра дерева процессов:==
1. **Команда `ps`**:
   ```
   ps -ejH
   ```
   Показывает процессы в виде дерева с их связями.

2. **Команда `pstree`**:
   ```
   pstree
   ```
   Отображает дерево процессов в удобном виде. Добавьте флаг `-p`, чтобы также показывались PID:
   ```
   pstree -p
   ```

3. **Команда `top`**:
   Интерфейс для мониторинга процессов в реальном времени. Для сортировки по родительским процессам можно использовать команду `htop`.

#### ==Ключевые процессы:==
- **systemd или init** (PID 1) — процесс, который отвечает за запуск других процессов после загрузки системы.
- **fork() и exec()** — системные вызовы, которые используются для создания новых процессов. `fork()` создаёт копию процесса, а `exec()` заменяет содержимое процесса на новое.

#### ==Как процессы взаимодействуют:==
- Когда процесс завершается, он отправляет сигнал своему родительскому процессу.
- Родительский процесс с помощью вызова `wait()` может получить информацию о завершении дочернего процесса.
- Если родитель не обработал завершение дочернего процесса, тот становится **процессом-зомби**, пока родитель не получит его статус.

### ==Заключение==
Дерево процессов отражает структуру и зависимость всех процессов в системе Linux. Благодаря этому механизму операционная система управляет задачами и обеспечивает их взаимодействие.