`GROUP BY` используется для группировки строк по одному или нескольким столбцам с целью последующего применения агрегатных функций (`COUNT`, `SUM`, `AVG`, `MIN`, `MAX`, и др.).

###### **Синтаксис**
```sql
SELECT столбец_группировки, агрегатные_функции
FROM таблица
GROUP BY столбец_группировки;
```

###### **Группировка по одному столбцу**
```sql
SELECT country, COUNT(*) AS users_count
FROM users
GROUP BY country;
```
Считает, сколько пользователей из каждой страны.

###### **Группировка по нескольким столбцам**
```sql
SELECT department, role, AVG(salary) AS avg_salary
FROM employees
GROUP BY department, role;
```
Средняя зарплата по каждой паре "отдел + должность".

###### **С `HAVING` — фильтрация групп**
```sql
SELECT customer_id, COUNT(*) AS orders_count
FROM orders
GROUP BY customer_id
HAVING COUNT(*) > 5;
```
Вернёт только тех клиентов, у которых более 5 заказов.
`HAVING` работает как `WHERE`, но для групп, а не отдельных строк.

###### **Что происходит под капотом**
1. PostgreSQL сканирует таблицу.
2. Разбивает строки на группы по значению колонок из `GROUP BY`.
3. Применяет агрегатные функции к каждой группе.
4. Возвращает по одной строке на каждую группу.
    
