**Оптимизатор** (query optimizer) — это часть движка выполнения запросов, которая:
- анализирует SQL-запрос,
- строит альтернативные планы его выполнения,
- оценивает их стоимость по разным критериям,
- выбирает наилучший план (обычно — с минимальными затратами на ресурсы).

**План запроса** — это пошаговое описание того, как именно СУБД будет выполнять SQL (в каком порядке, какие индексы использовать, как соединять таблицы и т.д.)


###### **Как работает оптимизатор (этапы)**
1. Анализ SQL-запроса (парсинг и нормализация):
    - Синтаксический и семантический анализ.
    - Преобразование к реляционной алгебре.
        
2. Генерация возможных планов:
    - Разные способы соединения (`nested loop`, `merge join`, `hash join`).
    - Сканирование: `Seq Scan`, `Index Scan`, `Bitmap Index Scan`.
        
3. Оценка стоимости каждого плана:
    - Используются статистики: число строк, селективность, кардинальность. 
    - Считаются оценки по времени CPU, чтению с диска (I/O), памяти.
        
4. Выбор наилучшего (оптимального) плана:
    - Выбирается план с наименьшей "стоимостью".
    - Он передаётся на фазу исполнения.
