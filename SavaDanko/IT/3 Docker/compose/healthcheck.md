`healthcheck` — это встроенный механизм Docker для проверки работоспособности контейнера.

С его помощью Docker периодически выполняет заданную команду внутри контейнера и отслеживает:
- Здоров ли контейнер (успешный результат проверки).
- Неисправен ли контейнер (проверка не проходит заданное количество раз).
    
###### **Пример использования** `healthcheck` **в** `docker-compose.yml`
```yaml
version: "3.8"

services:
  app:
    image: myapp
    ports:
      - "8080:8080"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 5s
```

| Параметр       | Что означает                                                                      |
| -------------- | --------------------------------------------------------------------------------- |
| `test`         | Команда, которая выполняется внутри контейнера для проверки состояния.            |
| `interval`     | Интервал между проверками (по умолчанию 30 секунд).                               |
| `timeout`      | Сколько ждать ответа команды перед признанием её неудачной (по умолчанию 30s).    |
| `retries`      | Сколько раз подряд проверка должна провалиться, чтобы контейнер считался больным. |
| `start_period` | Время после запуска контейнера, в течение которого не учитываются сбои.           |

###### **Что можно указывать в** `test`
- `["CMD", "command"]` — стандартный вариант, выполняется команда внутри контейнера.
- `["CMD-SHELL", "команда shell"]` — позволяет использовать команды оболочки.
- `NONE` — отключает `healthcheck`.
    
Примеры:
```yaml
test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
test: ["CMD-SHELL", "pg_isready -U postgres"]
test: NONE
```
