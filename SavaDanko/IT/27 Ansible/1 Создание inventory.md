Инвентари (inventory) организуют управляемые узлы в централизованных файлах, которые содержат системную информацию и сетевые адреса. Используя inventory-файл, Ansible может управлять большим числом хостов одной командой.

Чтобы выполнить следующие шаги, потребуется IP-адрес или полное доменное имя (FQDN) хотя бы одного хоста. В демонстрационных целях хост может работать локально в контейнере или виртуальной машине. Нужно также убедиться, что ваш публичный SSH-ключ добавлен в файл `authorized_keys` на каждом хосте.

###### **Пошаговое руководство**
1. Создайте файл `inventory.ini` в директории `ansible_quickstart`, которую вы подготовили на предыдущем шаге.

2. Добавьте новую группу `[myhosts]` в файл `inventory.ini` и укажите IP-адреса или FQDN всех хостов:
```ini
[myhosts]
192.0.2.50
192.0.2.51
192.0.2.52
```

3. Проверьте inventory:
```bash
ansible-inventory -i inventory.ini --list
```

4. Пропингуйте группу `myhosts` из вашего inventory:
```bash
ansible myhosts -m ping -i inventory.ini
```

###### **Примечание**
Используйте опцию `-u` с командой `ansible`, если имя пользователя на control-node отличается от имени на управляемых хостах.

Вот профессиональный перевод предоставленного фрагмента:

###### **Инвентари в формате INI или YAML**
Вы можете создавать inventory как в файлах формата INI, так и в YAML.  
В большинстве случаев (например, как в предыдущем примере) файлы INI просты и удобны для чтения при небольшом числе управляемых узлов.

Использование формата YAML становится более оправданным по мере роста числа управляемых узлов.  
Например, ниже приведён эквивалент файла `inventory.ini`, в котором каждому узлу задаются уникальные имена и используется поле `ansible_host`:
```yaml
myhosts:
  hosts:
    my_host_01:
      ansible_host: 192.0.2.50
    my_host_02:
      ansible_host: 192.0.2.51
    my_host_03:
      ansible_host: 192.0.2.52
```

###### **Советы по созданию inventory**
- Убедитесь, что имена групп осмысленные и уникальные. Названия групп чувствительны к регистру.    
- Избегайте пробелов, дефисов и ведущих чисел в названиях групп (используйте `floor_19`, а не `19th_floor`).
- Группируйте хосты в inventory логически — по принципу What, Where, When:

What (Что)  
Группируйте хосты по топологии. Примеры: `db`, `web`, `leaf`, `spine`.

Where (Где)
Группируйте хосты по географическому признаку. Примеры: `datacenter`, `region`, `floor`, `building`.

When (Когда)
Группируйте хосты по стадиям окружений. Примеры: `development`, `test`, `staging`, `production`.

---
###### **Использование метагрупп**
Создайте метагруппу, которая объединяет несколько групп в вашем inventory, используя следующий синтаксис:
```yaml
metagroupname:
  children:
```
Следующий пример inventory иллюстрирует базовую структуру для дата-центра.

В этом примере есть метагруппа `network`, которая включает все сетевые устройства, и метагруппа `datacenter`, которая объединяет группу `network` и все веб-серверы.
```yaml
leafs:
  hosts:
    leaf01:
      ansible_host: 192.0.2.100
    leaf02:
      ansible_host: 192.0.2.110

spines:
  hosts:
    spine01:
      ansible_host: 192.0.2.120
    spine02:
      ansible_host: 192.0.2.130

network:
  children:
    leafs:
    spines:

webservers:
  hosts:
    webserver01:
      ansible_host: 192.0.2.140
    webserver02:
      ansible_host: 192.0.2.150

datacenter:
  children:
    network:
    webservers:
```


###### **Создание переменных**
Переменные задают значения для управляемых узлов, такие как IP-адрес, FQDN, операционная система и SSH-пользователь. Это избавляет от необходимости передавать их при каждом запуске команд Ansible.

Переменные могут назначаться конкретным хостам:
```yaml
webservers:
  hosts:
    webserver01:
      ansible_host: 192.0.2.140
      http_port: 80
    webserver02:
      ansible_host: 192.0.2.150
      http_port: 443
```

Переменные также можно применять ко всем хостам группы:
```yaml
webservers:
  hosts:
    webserver01:
      ansible_host: 192.0.2.140
      http_port: 80
    webserver02:
      ansible_host: 192.0.2.150
      http_port: 443
  vars:
    ansible_user: my_server_user
```
