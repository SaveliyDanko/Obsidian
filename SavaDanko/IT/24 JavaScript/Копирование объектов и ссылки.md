#js 

---
[Object-Copy](https://learn.javascript.ru/object-copy)

---
#### Примитивные значения
Примитивные значения (строки, числа, логические значения) копируются как целые значения.
  ```javascript
  let message = "Привет!";
  let phrase = message;
  ```
В результате: две независимые переменные с одинаковыми значениями.

#### Объекты и ссылки
Объекты в JavaScript хранятся по ссылке, а не как целое значение.
Переменная, которой присвоен объект, хранит не сам объект, а его адрес в памяти (ссылку).

Пример:
  ```javascript
  let user = { name: "John" };
  let admin = user;  // копируется ссылка
  ```
Теперь обе переменные `user` и `admin` ссылаются на один и тот же объект.

#### Изменение через ссылку
Изменение объекта через одну переменную отразится на всех переменных, которые ссылаются на этот объект:
  ```javascript
  admin.name = "Pete";  // изменено по ссылке
  alert(user.name);  // "Pete", изменения видны через обе переменные
  ```

#### Сравнение объектов
Два объекта равны только в том случае, если они ссылаются на один и тот же объект:
  ```javascript
  let a = {};
  let b = a;
  alert(a == b);  // true
  alert(a === b); // true
  ```

Если два объекта независимы (даже если они одинаковы по содержимому), они не равны:
  ```javascript
  let a = {};
  let b = {};
  alert(a == b);  // false
  ```

#### Клонирование объекта
В JavaScript объекты копируются по ссылке, но иногда нужно создать независимую копию объекта (клон).
Для создания клона можно перебрать все свойства объекта и скопировать их:
  ```javascript
  let user = { name: "John", age: 30 };
  let clone = {};  // новый пустой объект

  for (let key in user) {
    clone[key] = user[key];  // копируем свойства
  }

  clone.name = "Pete";  // изменения в клоне не влияют на оригинал
  ```

#### Метод Object.assign
Метод `Object.assign` используется для копирования свойств из одного или нескольких объектов в целевой объект:
  ```javascript
  Object.assign(dest, src1, src2, ...);
  ```
- `dest` — целевой объект.
- `src1, src2, ...` — исходные объекты.
- Все свойства из `src1, src2, ...` копируются в объект `dest`.
- Возвращает объект `dest`.

Пример объединения нескольких объектов:
  ```javascript
  let user = { name: "John" };
  let permissions1 = { canView: true };
  let permissions2 = { canEdit: true };

  Object.assign(user, permissions1, permissions2);
  // теперь user = { name: "John", canView: true, canEdit: true }
  ```

Если свойство уже существует в целевом объекте, оно будет перезаписано:
  ```javascript
  let user = { name: "John" };
  Object.assign(user, { name: "Pete" });
  alert(user.name);  // "Pete"
  ```

#### Клонирование через Object.assign
`Object.assign` можно использовать для клонирования объекта:
  ```javascript
  let user = { name: "John", age: 30 };
  let clone = Object.assign({}, user);  // клонирование
  ```
Этот метод копирует все свойства объекта `user` в новый пустой объект, создавая независимую копию.

#### Проблема с вложенными объектами
Когда объект содержит вложенные объекты (ссылки на другие объекты), простое копирование с использованием `Object.assign()` не создаёт независимых копий вложенных объектов. Вместо этого копируются ссылки, и оба объекта (оригинальный и клон) будут ссылаться на один и тот же вложенный объект.

Пример:
  ```javascript
  let user = {
    name: "John",
    sizes: {
      height: 182,
      width: 50
    }
  };

  let clone = Object.assign({}, user);
  alert(user.sizes === clone.sizes);  // true, общий объект
  ```
В этом примере, после клонирования оба объекта `user` и `clone` будут содержать ссылку на один и тот же объект `sizes`.

#### Глубокое клонирование
Для того чтобы полностью клонировать объект, включая все вложенные объекты, необходимо использовать глубокое клонирование. При этом создаются копии всех вложенных объектов, а не ссылки на них.
  
Способы глубокого клонирования:
1. Рекурсивное клонирование: можно реализовать с помощью цикла, который проверяет каждое значение и копирует его структуру.
2. Готовые библиотеки: например, функция `_.cloneDeep(obj)` из библиотеки Lodash.
3. Метод `structuredClone()`: это встроенный метод для полного клонирования объектов, но он поддерживается только современными браузерами.

