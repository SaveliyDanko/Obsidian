#js 

---
[Optional-Chaining](https://learn.javascript.ru/optional-chaining)

---
#### Опциональная цепочка (Optional Chaining)
Опциональная цепочка `?.` — это безопасный способ доступа к вложенным свойствам объектов, даже если какое-либо из промежуточных свойств не существует. Она позволяет избежать ошибок при попытке доступа к свойству, которое может быть `undefined` или `null`.

#### Проблема «несуществующего свойства»
Если мы пытаемся получить доступ к вложенному свойству, которого нет, JavaScript выдаст ошибку, например:
```js
let user = {}; // объект без адреса
alert(user.address.street); // Ошибка!
```
Это связано с тем, что `user.address` имеет значение `undefined`, и попытка обращения к `street` приводит к ошибке.

Чтобы избежать ошибки, можно использовать условные проверки:
```js
let user = {};
alert(user.address ? user.address.street : undefined); // undefined
```
Но это решение не всегда удобно, особенно когда свойство вложено глубже, так как код становится громоздким и повторяются вызовы одних и тех же свойств.

#### Использование опциональной цепочки `?.`
Опциональная цепочка `?.` решает эту проблему, останавливая выполнение и возвращая `undefined`, если значение перед `?.` является `null` или `undefined`. Например:
```js
let user = {}; // объект без адреса
alert(user?.address?.street); // undefined (без ошибки)
```
Преимущества:
- Лаконичность: Код становится короче и проще для понимания, без повторяющихся проверок.
- Безопасность: Не вызывает ошибку при обращении к несуществующим свойствам.

#### Другие примеры использования `?.`
1. Доступ к свойствам объектов:
```js
let user = null;
alert(user?.address); // undefined
```

2. Доступ к элементам DOM:
```js
let html = document.querySelector('.elem')?.innerHTML; // undefined, если элемента нет
```

3. Вызов методов:
    Опциональная цепочка может применяться для вызова метода:
```js
let userAdmin = {
	admin() {
		alert("Я админ");
	}
};

let userGuest = {};

userAdmin.admin?.(); // Я админ
userGuest.admin?.(); // ничего не произойдёт (нет ошибки)
```

4. Доступ к массивам и свойствам через квадратные скобки `?.[]`:
```js
let key = "firstName";
let user1 = { firstName: "John" };
let user2 = null;

alert(user1?.[key]); // John
alert(user2?.[key]); // undefined
```

5. Удаление свойства с `?.`:
```js
delete user?.name; // удаляет user.name, если пользователь существует
```

#### Использование `?.` только для чтения
Опциональная цепочка `?.` не используется для записи. Например:
```js
let user = null;
user?.name = "John"; // Ошибка, запись невозможна
```
Это так же, как попытаться присвоить значение `undefined = "значение"`.

#### Когда следует использовать `?.`
Использовать опциональную цепочку `?.` следует только там, где допустимо, что свойство или объект могут отсутствовать, т.е. когда отсутствие чего-то является нормальным сценарием. Например, когда объект может быть не инициализирован. Если же объект должен существовать, лучше не использовать `?.`, чтобы ошибка указывала на проблему в коде.